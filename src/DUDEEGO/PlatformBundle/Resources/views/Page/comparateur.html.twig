{% extends "DUDEEGOPlatformBundle::layout.html.twig" %}

{% block title %}
  Comparateur - {{ parent() }}
{% endblock %}

{% block dudeegoplatform_body %}

  <div class="row">
    <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2">
      <div class="well">

        {#Formulaire de recherche#}
        {{ form_start(form, {'action': path('dudeego_platform_filterComparateur'), 'method': 'GET'}) }}
        {# Les erreurs générales du formulaire. #}
        {% if form_errors(form) %}
          <div class="alert alert-danger" role="alert">
            {{ form_errors(form) }}
          </div>
        {% endif %}

        <div class="form-group">
          {{ form_label(form.nomuniversite, 'Rechercher') }}
          {{ form_widget(form.nomuniversite) }}

          {{ form_label(form.formations) }}
          {{ form_widget(form.formations) }}

          {{ form_label(form.langues) }}
          {{ form_widget(form.langues) }}

          {{ form_label(form.villes) }}
          {{ form_widget(form.villes) }}

          {{ form_label(form.pays) }}
          {{ form_widget(form.pays) }}
          
          {{ form_rest(form) }}

          {{ form_widget(form.reinitialiser) }}           
          {{ form_widget(form.rechercher) }}
        </div>
      </form>

    </div>
  </div>
  <div class="col-sm-8 col-md-8 col-lg-8 col-xl-8">
    <table id="universite" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%" data-order='[[ 1, "asc" ]]' data-page-length='10'>
      <thead>
        <tr>
          <th>Etablissement</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% if listUniversite is defined %}
          {% for rowUniversite in listUniversite %}
            <tr>
              <td>
                <div style="float:left;">
                  {% for itemimage in rowUniversite.images %}
                    <img class="media-object img-rounded img-responsive"  src="{{ itemimage.url }}" alt="{{ itemimage.alt }}">
                  {% endfor %}
                </div>
                <div style="float:right;">
                 {{ rowUniversite.nometablissement }}
               </div>  
             </td>
             <td>
              {{ rowUniversite.description|slice(0, 50) ~ '...' }}
            </td>
            <td>
             <div style="float:left;">
              <a href="{{ path('dudeego_platform_detailsComparateur', { 'id' : rowUniversite.id } ) }}" >Détails</a>
            </div>
            <div style="float:right;">
             <!-- trigger favorite -->
             <a href="{{ path('dudeego_platform_favorisComparateur', {'id': rowUniversite.id }) }}">Favoris</a>
           </div>                
         </td>
       </tr>
     {% endfor %}
   {% endif %}
 </tbody>
</table>
</div>
<div class="col-sm-2 col-md-2 col-lg-2 col-xl-2">
  <div class="well">
    <table id="favoris" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%" data-order='[[ 1, "asc" ]]' data-page-length='25'>
      <thead>
        <tr>
          <th>Etablissement</th>
        </tr>
      </thead>
      <tbody>
        {% if listFavUniversite is defined %}
          {% for rowUniversite in listFavUniversite %}
            <tr>
              <td>
                {% for itemimage in rowUniversite.images %}
                  <img class="media-object img-rounded img-responsive"  src="{{ itemimage.url }}" alt="{{ itemimage.alt }}">
                {% endfor %}
              </td>
            </tr>
          {% endfor %}
        {% endif %}
      </tbody>
    </table>
    <button type="button" class="btn btn-primary">Comparer</button>
  </div>
</div>
</div>

<script type="text/javascript">
  $('#universite').DataTable( {
    paging: true,
    responsive: true,
    searching: false
  } );
</script>

<script type="text/javascript">
  $('#favoris').DataTable( {
    paging: false,
    responsive: true,
    searching: false
  } );
</script>

{% endblock %}
